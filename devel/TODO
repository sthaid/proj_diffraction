===============================================
TODO
===============================================

Laser Box                                                               TODO
- find a solid base
- design box, and make drawings, could use tinkercad
  - how much space will be needed for the interferometer
- measure laser diameter and design 3d print parts
- will need the height of the sensor for box design
- need to buy
  - buy circular saw to cut the hole for the pvc pipe
  - buy neutral density filter, but first determine what level is needed
  - misc parts, such as angle brackets and light insulation, etc

Laser Mount 
- pick out green laser and get dimensions                            DONE
  - will need to measure the dimensions when it gets here
- tinkercad pieces needed, and print them                            TODO
  - cone and backplate                                               
  - the ball and hole 
  - laser end support
- what is size of ND filter                                          DONE
     50 x 50 mm   thickness 2.1 mm  and 2.8 mm for OD 3 and 4
     SCHOTT NG9, 3.0 OD, 50mm Sq., Absorptive ND Filter
     SCHOTT NG9, 4.0 OD, 50mm Sq., Absorptive ND Filter
- buy laser pointer with on/off switch                               DONE
     https://www.apinex.com/ret2/JLPS-20B.html
- hardware for laser back end support                                RECEIVED
  - m3 screw with knob,                                              
  - m3 nuts                                                         
   - searches for the nutes
       "inside outside thread nut"
       "metric threaded insert"
       T Nuts
       "inside outside thread screw sleeve conversion nut"

SiPM sensor
- need to know height of sensor for Laser Box design                   TODO
- design the mount for the SiPM sensor
- connect to new amplifier and view dark pulses on scope
- add some light and compare pulse rate with light on and off
- ordered the ZX60−43S+  - should receive 2nd eamil Feb 12             ORDERED
- rpi / gpio
  - try using real time enhancements
  - update dra_gpio.h to allow for setting pull up/down
- try to make use of the inexpensive RF amplifiers ?                   MAYBE LATER
  - how to make band pass filter
  - simulate band pass filter with my circuit simulator             
    (maybe modify it to do a frequency sweep graph, 
     but this is probably too hard)
  - buy 2nd $10 amp
  - buy parts for band pass filter
  - make the band pass filter, and try another 2nd $10 amp           

Work on my double slit proto
- assemlbe once parts are received                                  TODO
- mount for my double slit                                          TODO
- .1 mm diameter wire                                               RECEIVED
- thickness measurements
  - thickness of razor blade  .089 mm
  - thickness of paper        .095 mm
  - diameter of wire ordered  .099 mm
- hardware from bolt depot                                          RECEIVED 
  - m3 nuts        10
  - m3 washers     10   fender
  - m3 screws      10   5mm len
  - m3 screws      10   8mm len
  - m3 screws      10  10mm len
  - and same as above for m4
  - #39 drill, 2.5mm
- 3d print - sla                                                    ORDERED
  info: razor is 22 x 43
  tinkercad
   - piece  46 x 46 x 8
   - center box is 10 x 10
   - m3 screw holes 11 mm off center line, and diameter 3.5 mm
   - slits are on center line, and are     1  10.5 8
       3 mm from edge of box
       10.5 mm long
       1 mm wide
   - cylindr 5 x 5 x 8
- order shims                                                       OREDERED FROM ACCU & EBAY
- INFO shims
  - 0.1 mm stainless steel shim
  - Thickness Feeler Gauge 0.1mm Stainless Steel
  - https://www.ebay.com/itm/4-5-x-10-x-0-1mm-Stainless-Steel-Shim-Washer-10pcs/323746351062?hash=item4b60c947d6:g:BU8AAOSwVDpca35V
  - https://www.accu.co.uk/704-shim-washers#elasticsearch_id_feature_894828=894828_125&id_elasticsearch_category=704&orderby=ranking&orderway=asc
        ACCU 22 x 16
             18 x 12
             16 x 10
             14 x 8
             12 x 6
             10 x 5
             8 x 4
             6 x 3
        EBAY 10 x 4.5

Updata photons program to account for the percentage of photons      TODO
that actually go through the slit
- also print the parameters with the results

sensor box
- make drawing, including the wiring
- make the box
- test for light leaks
- mount the rail and the sensor
- test the dark count rate in the box in lighted room and darkened room
- consider painting interior black
- mount a low level light source on the flange cap for testing

Misc
- check amazon order for double slit                                 TODO
- clean up devel dir
  - add README
  - update pololu setting.txt and do_apply_settngs

===============================================
POSSIBLE FUTURE ENHANCEMENTS
===============================================

check into peltier cooling 
- the cooler would be cooling the entire sensor box
- https://www.amazon.com/s?k=peltier+cooler&ref=nb_sb_noss_2
- graph the dark rate based on cooling

===============================================
BOX FOR PHOTON COUNTER
===============================================

PVC Pipe Sizes
  https://www.pvcfittingsonline.com/resource-center/pvc-pipe-od-size-chart/

SEARCH:  Square Mounting Flange Spigot/Street

===============================================
PULES STRETCHER   
===============================================

LTC6752 Pulse Stretcher Circuit/Monostable Multivibrator
  input 15mv-3.3v pules,  5ns
  output  3.3v pulse  100ns

I think the GPIO max voltage is 3.3v

http://www.proto-advantage.com/store/
  Ordered 2x of 
     SC70-6  LTC6752ISC6-4#TRMPBFCT-ND   Assembled with 0.65 pins

This is the -4 version that I purchased:
     TOP VIEW PINS

        3       2       1
       +IN    VEE       Q
        -----------------
        |               |
        |               |
        -----------------
        4       5       6
       -IN     VDD     VCC

Datasheet
  https://www.digikey.com/en/datasheets/linear-technologyanalog-devices/linear-technologyanalog-devices-45780
  Pulse Stretcher circuit on page 23

Components Specified vs Used
  Specified      Used
  ---------      ----
    49.9 ohm    47 ohm
    15k         10k      this reduces input sensitivity
    22k         20k
    6.65k       6.8k
    100 pf      220 pf   this increases the output pulse duration to ~200 ns

Comparison of Feedback vs Bias voltage on U1
  Feedback Voltage = (3.3 - .7) / (1000 / 47) = 0.122 V = 122 mv
  Bias Voltage     = 3.3 / (10000 / 47)       = 0.015 V =  15 mv

Connection to GPIO

Performance Measurements
  The values in the above table were determined by reducing the SigGen
  amplitude to the point that the dra_pulse program (on the Raspberry Pi)
  stopped detecting the pulses at the expected frequency.

  Other SigGen Parameters
    Duty = 2 %
    Off  = 100 %

               ----- 4.7K Bias R ------         ----- 10K Bias R ------
               SigGen         Scope             SigGen         Scope
  Frequency     Amp         Amp / Width          Amp         Amp / Width
  ---------    ------       -----------         ------       -----------
    50 Khz     .076         33mv  300ns          .039        18mv  350ns
   100         .08          35    200            .039        17    180
   500         .09          28     50            .048        15     50
  1000         .18          35     50            .10         20     50

   Based on the above results, am using the 10K Bias R as of 2/12/2020

Some Problems Encountered
  I had difficulty getting rid of noise until I switched from a BNC cable
   to an oscilloscope probe measurement. 
  Connecting to GPIO, and also using the oscilloscope probe, needed a 
   resistor to stabilize the signal at the GPIO pin.
  When using the Raspberry Pi power supply, there were pulse counts 
   detected by the dra_pulse program when the SigGen was disabled. Fixed
   this by using the 9V battery connected to the Breadboard power supply.

Future Investigations TODO    
  1) Try voltage divider instead of single 1k resistor to GPIO pin.
  2) What voltage causes gpio to read '1'.
  3) what is the input resistance for the gpio.
  4) how does oscilloscipe probe work

===============================================
RASPBERRY PI
===============================================

Recent Model
  Raspberry Pi-4 B  1,2,4GB

GPIO Access - T Type Expansion Board
  https://www.amazon.com/gp/product/B01LYN4J3B/ref=ox_sc_act_title_1?smid=A3IRH1M32QHQ71&psc=1

===============================================
LINEAR RAIL ACTUATOR
===============================================

Purchased this Linear Rail Actuator
- https://www.amazon.com/gp/product/B07DC42DLW/ref=ppx_yo_dt_b_asin_title_o01_s01?ie=UTF8&psc=1
- 100mm Travel Length Linear Rail Guide Ballscrew Sfu1605 DIY 
  CNC Router Parts X Y Z Linear Stage Actuator with NEMA17 Stepper Motor
- some specs        
   50mm/sec max
   1.8 degrees per full step    200 steps per rev
   1.7 amps
   Effective Travel Len  100 mm
   Total Len  258 mm
   Red,Blue  A+  A-
   Black  Green   B+ B-
- I'm running this using 20 Volt and the TIC T825 Controller Module from Pololu

another rail actuator: 
   https://www.amazon.com/Travel-Ballscrew-Sfu1605-Actuator-Stepper/dp/B07DC42DLW/ref=pd_sbs_469_2/136-6149952-4441408?_encoding=UTF8&pd_rd_i=B07DC42DLW&pd_rd_r=0128aa24-e330-4914-8e07-b61e6c2aacf4&pd_rd_w=0LFoJ&pd_rd_wg=ryczL&pf_rd_p=bdd201df-734f-454e-883c-73b0d8ccd4c3&pf_rd_r=ZKSXZSMVNEMQGWPW2196&refRID=ZKSXZSMVNEMQGWPW2196&th=1
   FOUND THIS ON THE STEPPER MOTOR 
      https://www.machineryoffers.com/offer/7812-ChiHai-Motor-CH4240-1704A-2-phase-4-wire-Stepper-Motor-42mm-1-7A-2-2Ohm-3D-printer-motor-and-CNC-XYZ.html
       42HS48-1704A-001  1.7A 5.2V

stepper motor voltage ...
  http://blog.inventables.com/p/stepper-motors.html
  Stepper motors have a rated voltage and current.  
  A typical stepper motor like our NEMA 17 might have a rated voltage of 2.8 
  Volts and a maximum current of 1.68 Amps.  This basically means if you hook 
  it up to 2.8 Volts it will draw 1.68 Amps.  If you try to run it at a 
  higher voltage it will draw more current and get excessively hot.  
  Most people don’t hook motors straight to a voltage source.  They use a 
  stepper motor driver.  Stepper motor drivers regulate the current.  
  If you hook it up to to 12V, for example, the motor while attempt to 
  draw more current, but the stepper motor driver will not allow that 
  to happen and use high frequency pulses to limit the average current 
  to the desired maximum value.

My controller
  https://www.pololu.com/product/3130     TIC T825
  It can operate from 8.5 V to 45 V and can deliver up to approximately 
  1.5 A per phase without a heat sink or forced air flow (or 2.5 A max 
  with sufficient additional cooling).

===============================================
DOUBLE SLIT 
===============================================

Ordered from Amazon:
  4 Double Slits of Different Spacings    U14101  <=== ORDERED THIS ONE
  Slit Width (b)  =   .15 mm
  Spacings (g)    =   .25  .5  .75  1.0
  https://www.amazon.com/gp/product/B00KWZ5WQ0/ref=ox_sc_act_title_1?smid=ATVPDKIKX0DER&psc=1

Also Available - but did not order this one
  3 Double Slits with different widths    U14100
  Slit Width (b)  =   .1  .15  .2
  Spacings (g)    =     .3
  https://www.amazon.com/gp/product/B00KWZ6DOU/ref=ox_sc_act_title_2?smid=ATVPDKIKX0DER&psc=1

Experiments with single slits I made using utility knife blades:
  The Seperation in the below refers to the 
   first 2 nulls on opposite sides of the middle.
  The Predicted Seperation is from the 'ds' program.

  APPROXIMATE      PREDICTED         MEASURED 
  SLIT WIDTH       SEPERATION        SEPERATION
    .10 mm           26 mm            40 mm
    .15 mm           18 mm            14 mm
    .25 mm           11 mm            10 mm

===============================================
WAVELENGTH OF LIGHT    
===============================================

light wavelength
- 400    to 700     nanometers
- 400e-9 to 700e-9  meters
- .4e-6  to .7e-6   meters
- approx  0.5    micrometers
- approx  0.0005 millimeter

Infrared 750 nm to 1000000 nm
Red      610-750 nm
Green    500-570
Blue     450-500    <==== this will work best with my SiPM
Violet   400-425 nm

===============================================
LOW RATE PHOTON GENERATION
===============================================

how many photons are emitted from a laser pointer
- http://umdberg.pbworks.com/w/page/50455623/Momentum%20of%20a%20laser%20beam
- A laser pointer typically has a power rating of 1 mW, or 0.001 Joules per second. 
  This means that every second a laser pointer emits a number of photons equal to 
  (3.2x1018photons/J)(0.001J/s) = 3.2x1015 photons/s.

Red light lasers were once the standard, but lost its supremacy down the road. 
Red lasers lack the power and distance possible in newer models. Red lasers use 
diodes, optics, and various electronic components. Its wavelength is 630-680nm 
and its power is 5mW and below.

===============================================
SILICON PHOTMULTIPLIER  (SiPM)
===============================================

Digikey.com
-----------
  login   <== this is important
  Product Index > Development Boards, Kits, Programmers > Evaluation Boards - Sensors
     ON SEMI
     Light Silicon Photomultiplier
     C
     Sort by Price
  search result for SMA
  want the 1MM with highest U
  https://www.digikey.com/product-detail/en/on-semiconductor/MICROFC-SMA-10035-GEVB/MICROFC-SMA-10035-GEVBOS-ND/9744734
    MICROFC-SMA-10035-GEVB
    Digi-Key Part Number    MICROFC-SMA-10035-GEVBOS-ND	
    Manufacturer	    ON Semiconductor	
    Manufacturer            Part Number	MICROFC-SMA-10035-GEVB	
    Description	            C-SERIES 1MM 35U SMA	
    Manufacturer            Standard Lead Time	3 Weeks	
    Detailed Description    MicroFC-10035 C Light, Silicon Photomultiplier (SiPM) Sensor Evaluation Board

  The search page from above: https://www.digikey.com/products/en/development-boards-kits-programmers/evaluation-boards-sensors/795?FV=-1%7C488%2C345%7C364931%2C-8%7C795%2C-5%7C1054&quantity=0&ColumnSort=1000011&page=1&pageSize=25

===============================================
SILICON PHOTMULTIPLIER  (SiPM) ...
Notes On The MICROFC-SMA-10035-GEVB - C-SERIES 1MM 35U SMA
===============================================

DOC: C-Series SiPM Sensorss    ON Semiconductor
-----------------------------------------
Overview
- low dark count rate
- high PDE
- ultrafast timing applications
- fast output rsie time 300ps pulse width 600 ps
- sizes 1mm, 3mm, 6mm
- surface mount package
- performance similar to conventinal PMT

Performance Parameters  (for 1mm 35u)
- Breakdown Voltabe Vbr             24.2 - 24.7 V
- recommended overvoltage range      1.0 - 5.0  V
  (voltage above Vbr
- spectral range                    300 - 950 nm
- peak wavelength                   420 nm
- PDE at peak wavelenght, Vbr+2.5   31%
- PDE at peak wavelenght, Vbr+2.5   31%
- Gain Vbr+2.5                      3x10^6
- Dark Current Vbr+2.5              15 nA
- Dark Count Rate Vbr+2.5           30 KHZ  - max 96 khz
- Fast Output                       0.3ns rise,  0.6ns width
- Number of Microcells              504
- Maximum current level             6 mA

PDE Graph for 30035   at Vbr+2.5
- Red      610-750 nm       680     7%
- Green    500-570 nm       530    17%
- Blue     450-500 nm       480    23%

Dark Count Rate 30035 (Example)
- 10 - 50 khz/mm^2   for Overvoltage 1 - 5

Evaluation Boards - SMA Biasing Borard MicroFc-SMA-xxxxx
- the ouput can be connected directly to a 50 ohm terminated oscilloscope
- connectors:
     Vbias  :  Positive bias input  (cathode)
     Fout   :  Fast Output
     Sout   :  Standard Output  (ande)

DOC: Reference Designs for the SMA and SMTPA MLP-Packaged SiPM Evaluation Boards
---------------------------------------------------------------------------

J1 Bias
J2 Fout
J3 Sout

Sout is attached to 49R9-0402 Resisotor
  This appears to be 49.9 ohms

DOC: Introduction to the Silicon Photomultiplier (SiPM)
-------------------------------------------------

Standard Output Pulse Shape  (not for my part though)
- 20mv  - 130 ns
- 20mv  - 75 ms
- 80mv  - 50 ms
- 100mv - max
  
DOC: Biasing and Readout of ON Semiconductor SiPM Sensors
-----------------------------------------------------

P-on-N structure used for blue-sensitive SiPMs - C-Series, J-series

N-on-P structure creaes a more red sensitive SiPM - RB Series

For P-on-N (C Series) the ouptu polarity should be positive

Amplifier examples are provided in this document

Amplification Needed
--------------------

Dark Count Pulse that I measured
- Amplitude = 2 mv
- Needed for Pulse Stretcher:
  - 15 mv  to 3..3v
  - 5 ns
- the 5 ns should not be a problem

What DB gain is needed to get from 2 mv to:
- http://www.sengpielaudio.com/calculatorVoltagePower.htm
- http://www.sengpielaudio.com/calculator-amplification.htm
- Decibals:
  - doubling voltage is about 6db gain
  - doubling power is about 3db gain
- 15 mv  = 17 db gain
- 30     = 23 db gain
- 50     = 28 db gain
- 100    = 34 db gain
- 200    = 40 db gain

"More than one amplifier stage may be required to provide
 sufficient gain. A low noise 50 ohm voltage amplifier with
 a bandwidth of 1 GHz with a gain of 20 dB is suggested."
- A 2 mv + 20 db => 20 mv

"Figure 18. MicroFC−10020 Dark Pulse Shape. 
 Readout on Standard Output with 50  Series Resistor
 Connected to 2 x ZX60−43S+ Amplifiers in Series. Overvoltage = 5 V"
- This figure shows pulse amplitude of 200 mv, and 
  width at 50 mv of 25 ns

Looking for a Voltage Amplifier:
- 50 ohm
- bandwidth  1 Ghz
- gain      20 db

Coax connector acronyms
- SMA     -  50 ohm
- F Type  - 75 ohm, commonly used with RG59U cable
- SMP     - sub miniature push on

ZX60−43-S+
- https://www.minicircuits.com/WebStore/dashboard.html?model=ZX60-43-S%2B
- price is $70
- needs 5 vdc power
- connector is SMA
- 0.5 to 4000 MHZ   50ohm   SMA

HiLetgo 0.1-2000MHz RF WideBand Amplifier 30dB High Gain Low Noise LNA Amplifier
- need to confirm supply voltage, it is either
  - 6-12 or
  - 5 typical, 7 max
  - comment:  ended up looking the amp up and found that the board uses a 
              INA-02186 Monolithic Microwave Integrated Circuit for the amp 
              and that specific chip has a typical voltage of 5.5v and a max 
              voltage of 7v. I am not sure if past versions used a different 
              chip but the one on mine clearly is not rated for the 
              advertised voltages.
- gain is 30 db
- .1 - 2000 MHZ
- someone suggested this is the component: https://www.qsl.net/n9zia/metricom/ina02184.pdf
  but I should confirm that
- I measured the voltage at the amplifier component pin and found it to be about
  5 V when the input is 12 Volts. This is because of the voltage drop across the
  bias resistor

===============================================
DIODES
===============================================

    Anode  ------------->|------------  Cathode

    LED Larger Pin


    GPIO 3.3v  -------->|--------220ohm-------- GND


    LED Voltage drop approx 1.8V
