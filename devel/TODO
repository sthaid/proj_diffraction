===============================================
TODO
===============================================

SiPM
- make bigger hole in test box
- test amplifier
  - first check on the voltage, does it take 5 volts or 6-12?
- build pulse stretcher
  - test with signal generator
- connect pulse stretcher to Raspberry PI

make slit to test single slit diffraction, and to try to 
make a slit with the utility knife blades

sensor mount
- draw a design diagram

the real sensor box
- make drawing, including the wiring
- make the box
- test for light leaks
- mount the rail and the sensor
- test the dark count rate in the box in lighted room and darkened room
- consider painting interior black
- include a low level light source in the box, such as a green led at 
  low voltage, and/or taped over with electrical tape;  this may be best mounted
  on a flange cap
  
the real double slit box
- tbd

rpi / gpio
- try using real time enhancements
- update dra_gpio.h to allow for setting pull up/down

parts or tools needed
- circular saw to cut the hole for the pvc pipe

devel dir
- clean up devel dir
- may need a sipm dir 

- - - - - MAYBE LATER - - - - - - 

check into peltier cooling and eventually graph the dark rate based on cooling
- the cooler would be cooling the entire sensor box
- https://www.amazon.com/s?k=peltier+cooler&ref=nb_sb_noss_2

===============================================
BOX FOR PHOTON COUNTER
===============================================

PVC Pipe Sizes
  https://www.pvcfittingsonline.com/resource-center/pvc-pipe-od-size-chart/

SEARCH:  Square Mounting Flange Spigot/Street

===============================================
PULES STRETCHER   
===============================================

LTC6752 Pulse Stretcher Circuit/Monostable Multivibrator
  input 15mv-3.3v pules,  5ns
  output  3.3v pulse  100ns

I think the GPIO max voltage is 3.3v

http://www.proto-advantage.com/store/
  Ordered 2x of 
     SC70-6  LTC6752ISC6-4#TRMPBFCT-ND   Assembled with 0.65 pins

===============================================
RASPBERRY PI
===============================================

Recent Model
  Raspberry Pi-4 B  1,2,4GB

GPIO Access - T Type Expansion Board
  https://www.amazon.com/gp/product/B01LYN4J3B/ref=ox_sc_act_title_1?smid=A3IRH1M32QHQ71&psc=1

===============================================
LINEAR RAIL ACTUATOR
===============================================

Purchased this Linear Rail Actuator
- https://www.amazon.com/gp/product/B07DC42DLW/ref=ppx_yo_dt_b_asin_title_o01_s01?ie=UTF8&psc=1
- 100mm Travel Length Linear Rail Guide Ballscrew Sfu1605 DIY 
  CNC Router Parts X Y Z Linear Stage Actuator with NEMA17 Stepper Motor
- some specs        
   50mm/sec max
   1.8 degrees per full step    200 steps per rev
   1.7 amps
   Effective Travel Len  100 mm
   Total Len  258 mm
   Red,Blue  A+  A-
   Black  Green   B+ B-
- I'm running this using 20 Volt and the TIC T825 Controller Module from Pololu

another rail actuator: 
   https://www.amazon.com/Travel-Ballscrew-Sfu1605-Actuator-Stepper/dp/B07DC42DLW/ref=pd_sbs_469_2/136-6149952-4441408?_encoding=UTF8&pd_rd_i=B07DC42DLW&pd_rd_r=0128aa24-e330-4914-8e07-b61e6c2aacf4&pd_rd_w=0LFoJ&pd_rd_wg=ryczL&pf_rd_p=bdd201df-734f-454e-883c-73b0d8ccd4c3&pf_rd_r=ZKSXZSMVNEMQGWPW2196&refRID=ZKSXZSMVNEMQGWPW2196&th=1
   FOUND THIS ON THE STEPPER MOTOR 
      https://www.machineryoffers.com/offer/7812-ChiHai-Motor-CH4240-1704A-2-phase-4-wire-Stepper-Motor-42mm-1-7A-2-2Ohm-3D-printer-motor-and-CNC-XYZ.html
       42HS48-1704A-001  1.7A 5.2V

stepper motor voltage ...
  http://blog.inventables.com/p/stepper-motors.html
  Stepper motors have a rated voltage and current.  
  A typical stepper motor like our NEMA 17 might have a rated voltage of 2.8 
  Volts and a maximum current of 1.68 Amps.  This basically means if you hook 
  it up to 2.8 Volts it will draw 1.68 Amps.  If you try to run it at a 
  higher voltage it will draw more current and get excessively hot.  
  Most people don’t hook motors straight to a voltage source.  They use a 
  stepper motor driver.  Stepper motor drivers regulate the current.  
  If you hook it up to to 12V, for example, the motor while attempt to 
  draw more current, but the stepper motor driver will not allow that 
  to happen and use high frequency pulses to limit the average current 
  to the desired maximum value.

My controller
  https://www.pololu.com/product/3130     TIC T825
  It can operate from 8.5 V to 45 V and can deliver up to approximately 
  1.5 A per phase without a heat sink or forced air flow (or 2.5 A max 
  with sufficient additional cooling).

===============================================
DOUBLE SLIT ORDERED FROM AMAZON
===============================================

4 Double Slits of Different Spacings    U14101  <=== ORDERED THIS ONE
  Slit Width (b)  =   .15 mm
  Spacings (g)    =   .25  .5  .75  1.0
  https://www.amazon.com/gp/product/B00KWZ5WQ0/ref=ox_sc_act_title_1?smid=ATVPDKIKX0DER&psc=1

3 Double Slits with different widths    U14100
  Slit Width (b)  =   .1  .15  .2
  Spacings (g)    =     .3
  https://www.amazon.com/gp/product/B00KWZ6DOU/ref=ox_sc_act_title_2?smid=ATVPDKIKX0DER&psc=1

===============================================
WAVELENGTH OF LIGHT    
===============================================

light wavelength
- 400    to 700     nanometers
- 400e-9 to 700e-9  meters
- .4e-6  to .7e-6   meters
- approx  0.5    micrometers
- approx  0.0005 millimeter

Infrared 750 nm to 1000000 nm
Red      610-750 nm
Green    500-570
Blue     450-500    <==== this will work best with my SiPM
Violet   400-425 nm

===============================================
LOW RATE PHOTON GENERATION
===============================================

how many photons are emitted from a laser pointer
- http://umdberg.pbworks.com/w/page/50455623/Momentum%20of%20a%20laser%20beam
- A laser pointer typically has a power rating of 1 mW, or 0.001 Joules per second. 
  This means that every second a laser pointer emits a number of photons equal to 
  (3.2x1018photons/J)(0.001J/s) = 3.2x1015 photons/s.

Red light lasers were once the standard, but lost its supremacy down the road. 
Red lasers lack the power and distance possible in newer models. Red lasers use 
diodes, optics, and various electronic components. Its wavelength is 630-680nm 
and its power is 5mW and below.

===============================================
SILICON PHOTMULTIPLIER  (SiPM)
===============================================

Digikey.com
-----------
  login   <== this is important
  Product Index > Development Boards, Kits, Programmers > Evaluation Boards - Sensors
     ON SEMI
     Light Silicon Photomultiplier
     C
     Sort by Price
  search result for SMA
  want the 1MM with highest U
  https://www.digikey.com/product-detail/en/on-semiconductor/MICROFC-SMA-10035-GEVB/MICROFC-SMA-10035-GEVBOS-ND/9744734
    MICROFC-SMA-10035-GEVB
    Digi-Key Part Number    MICROFC-SMA-10035-GEVBOS-ND	
    Manufacturer	    ON Semiconductor	
    Manufacturer            Part Number	MICROFC-SMA-10035-GEVB	
    Description	            C-SERIES 1MM 35U SMA	
    Manufacturer            Standard Lead Time	3 Weeks	
    Detailed Description    MicroFC-10035 C Light, Silicon Photomultiplier (SiPM) Sensor Evaluation Board

  The search page from above: https://www.digikey.com/products/en/development-boards-kits-programmers/evaluation-boards-sensors/795?FV=-1%7C488%2C345%7C364931%2C-8%7C795%2C-5%7C1054&quantity=0&ColumnSort=1000011&page=1&pageSize=25

===============================================
Notes On The MICROFC-SMA-10035-GEVB - C-SERIES 1MM 35U SMA
===============================================

DOC: C-Series SiPM Sensorss    ON Semiconductor
-----------------------------------------
Overview
- low dark count rate
- high PDE
- ultrafast timing applications
- fast output rsie time 300ps pulse width 600 ps
- sizes 1mm, 3mm, 6mm
- surface mount package
- performance similar to conventinal PMT

Performance Parameters  (for 1mm 35u)
- Breakdown Voltabe Vbr             24.2 - 24.7 V
- recommended overvoltage range      1.0 - 5.0  V
  (voltage above Vbr
- spectral range                    300 - 950 nm
- peak wavelength                   420 nm
- PDE at peak wavelenght, Vbr+2.5   31%
- PDE at peak wavelenght, Vbr+2.5   31%
- Gain Vbr+2.5                      3x10^6
- Dark Current Vbr+2.5              15 nA
- Dark Count Rate Vbr+2.5           30 KHZ  - max 96 khz
- Fast Output                       0.3ns rise,  0.6ns width
- Number of Microcells              504
- Maximum current level             6 mA

PDE Graph for 30035   at Vbr+2.5
- Red      610-750 nm       680     7%
- Green    500-570 nm       530    17%
- Blue     450-500 nm       480    23%

Dark Count Rate 30035 (Example)
- 10 - 50 khz/mm^2   for Overvoltage 1 - 5

Evaluation Boards - SMA Biasing Borard MicroFc-SMA-XXXXX
- the ouput can be connected directly to a 50 ohm terminated oscilloscope
- connectors:
     Vbias  :  Positive bias input  (cathode)
     Fout   :  Fast Output
     Sout   :  Standard Output  (ande)

DOC: Reference Designs for the SMA and SMTPA MLP-Packaged SiPM Evaluation Boards
---------------------------------------------------------------------------

J1 Bias
J2 Fout
J3 Sout

Sout is attached to 49R9-0402 Resisotor
  This appears to be 49.9 ohms

DOC: Introduction to the Silicon Photomultiplier (SiPM)
-------------------------------------------------

Standard Output Pulse Shape  (not for my part though)
- 20mv  130 ns
- 20mv  75 ms
- 80mv - 50 ms
- 100mv - max
  
DOC: Biasing and Readout of ON Semiconductor SiPM Sensors
-----------------------------------------------------

P-on-N structure used for blue-sensitive SiPMs - C-Series, J-series

N-on-P structure creaes a more red sensitive SiPM - RB Series

For P-on-N (C Series) the ouptu polarity should be positive

Amplifier examples are provided in this document

Amplification Needed
--------------------

Dark Count Pulse
- Amplitude = 2 mv
- Needed for Pulse Stretcher:
  - 15 mv  to 3..3v
  - 5 ns
- the 5 ns should not be a problem

What DB gain is needed to get from 2 mv to:
- http://www.sengpielaudio.com/calculatorVoltagePower.htm
- http://www.sengpielaudio.com/calculator-amplification.htm
- Decibals:
  - doubling voltage is about 6db gain
  - doubling power is about 3db gain
- 15 mv  = 17 db gain
- 30     = 23 db gain
- 50     = 28 db gain
- 100    = 34 db gain
- 200    = 40 db gain

"More than one amplifier stage may be required to provide
 sufficient gain. A low noise 50 ohm voltage amplifier with
 a bandwidth of 1 GHz with a gain of 20 dB is suggested."
- A 2 mv + 20 db => 20 mv

"Figure 18. MicroFC−10020 Dark Pulse Shape. 
 Readout on Standard Output with 50  Series Resistor
 Connected to 2 x ZX60−43S+ Amplifiers in Series. Overvoltage = 5 V"
- This figure shows pulse amplitude of 200 mv, and 
  width at 50 mv of 25 ns

Looking for a Voltage Amplifier:
- 50 ohm
- bandwidth  1 Ghz
- gain      20 db

Coax connectors
- SMA     -  50 ohm
- F Type  - 75 ohm, commonly used with RG59U cable
- SMP     - sub miniature push on

ZX60−43-S+
- https://www.minicircuits.com/WebStore/dashboard.html?model=ZX60-43-S%2B
- price is $70
- needs 5 vdc power
- connector is SMA
- 0.5 to 4000 MHZ   50ohm   SMA

HiLetgo 0.1-2000MHz RF WideBand Amplifier 30dB High Gain Low Noise LNA Amplifier
- need to confirm supply voltage, it is either
  - 6-12 or
  - 5 typical, 7 max
  - comment:  ended up looking the amp up and found that the board uses a 
              INA-02186 Monolithic Microwave Integrated Circuit for the amp 
              and that specific chip has a typical voltage of 5.5v and a max 
              voltage of 7v. I am not sure if past versions used a different 
              chip but the one on mine clearly is not rated for the 
              advertised voltages.
- gain is 30 db
- .1 - 2000 MHZ
- someone suggested this is the component: https://www.qsl.net/n9zia/metricom/ina02184.pdf
  but I should confirm that

===============================================
DIODES
===============================================

    Anode  ------------->|------------  Cathode

    LED Larger Pin


    GPIO 3.3v  -------->|--------220ohm-------- GND

